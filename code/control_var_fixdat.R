# Pesky commas outside of splits
fixdat = data.table(original = c("UNEMP, AGE_AT_MIGRATION, I(EDUC == 6), I(EDUC IN (7, 8)), I(EDUC >= 9), SEX, I(RACE == 1), I(MARST < 3), YEAR:STATE", 
                                 "METRO, FARM, RELATE, SEX, AGE, MARST, EDUC, FERTYR, YRSUSA1, I(SPEAKENG IN ??? | LINGISOL == 2), I(VETDISAB + DIFFREM + DIFFPHYS + DIFFMOB + DIFFCARE + DIFFSENS > 1), I(SPMPOV == 1 || OFFPOV == 1)", 
                                 "SEX, AGE, EDUC, RELATE, MARST, FERTYR, METRO, FARM, YRSUSA1, I(SPEAKENG IN (1, 6)), I(DIFFREM > 1), I(DIFFPHYS > 1), I(DIFFMOB > 1), I(DIFFCARE > 1), I(DIFFSENS > 1), UNEMP", "SEX, AGE, I(RACE == 1), I(MARST IN (1, 2)), I(SPEAKENG != 1), NCHILD, EDUC_RECODE, i.STATE:i.YEAR, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES", 
                                 "EDUC, SEX, I(RELATE IN (1, 2)), I(MARST < 3), I(RACE != 1), UNEMP", 
                                 "SEX, RACE, MARST, I(EDUC == 6), I(EDUC IN (7, 8), I(EDUC >= 9), AGE, YRSUSA1, STATE, YEAR", 
                                 "i.STATE:i.YEAR, i.YRIMMIG, i.AGE_AT_MIGRATION, YRSUSA1, I(EDUCD IN (62, 63, 65)), I(EDUCD == 64), I(VETSTATD IN (20, 21, 22)), I(EDUC IN (7, 8, 10, 11)), i.RACE, i.SEX, i.BIRTHYR:YEAR",
                                 "SEX, VETSTAT, I(MARST < 3), MAX(EDUC-5,0), I(SPEAKENG == 6) + 2*I(SPEAKENG == 5) + 3*I(SPEAKENG == 4) + 4*I(SPEAKENG == 3)",
                                 "VETSTAT, SEX, I(MARST in (1, 2)), MAX(EDUC - 5, 0), I(SPEAKENG == 6) + 2*I(SPEAKENG == 5) + 3*I(SPEAKENG == 4) + 4*I(SPEAKENG == 3)",
                                 "i.YEAR, i.STATE, I(METRO in (2, 3, 4)), SEX, I(RACE == 1), AGE, AGE_sq, YRSUSA1, yrsusa1_sq, I(MARST == 1), I(EDUCD BETWEEN 101 AND 116)", 
                                 "EDUCD, I(EDUCD ==64), I(EDUCD >=65 AND <=100), I(EDUCD >= 101), I(SEX == 1), I(MARST <= 2), UNEMP, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, HIGHEREDBAN, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES, I(RACE == 'chinese' | RACE== 'japanese' | RACE== 'other asian or pacific islander'), I(RACE == 'black/african american'), I(RACE == 'american indian or alaska native'), I(RACE == 'other race, nec' | RACE=='two major races' | RACE=='three or more major races'), i.YEAR, i.AGE, i.AGE_AT_MIGRATION, i.STATE", "EDUCD, I(EDUCD ==64), I(EDUCD >=65 AND <=100), I(EDUCD >= 101), I(SEX == 1), I(MARST <= 2), UNEMP, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, HIGHEREDBAN, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES, I(RACE == 'chinese' | RACE== 'japanese' | RACE== 'other asian or pacific islander'), I(RACE == 'black/african american'), I(RACE == 'american indian or alaska native'), I(RACE == 'other race, nec' | RACE=='two major races' | RACE=='three or more major races'), i.YEAR, i.AGE, i.AGE_AT_MIGRATION, i.STATE", "EDUCD, I(EDUCD ==64), I(EDUCD >=65 AND <=100), I(EDUCD >= 101), I(SEX == 1), I(MARST <= 2), UNEMP, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, HIGHEREDBAN, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES, I(RACE == 'chinese' | RACE== 'japanese' | RACE== 'other asian or pacific islander'), I(RACE == 'black/african american'), I(RACE == 'american indian or alaska native'), I(RACE == 'other race, nec' | RACE=='two major races' | RACE=='three or more major races'), i.YEAR, i.AGE, i.AGE_AT_MIGRATION, i.STATE", "Age, sex, marital status (0/1 married vs not), educ_recode (recoded as an ordinal variable), famsize, year of immigration", "age,sex,marst,nchild,relate,metro,educ,school, log(NS(HH income other than your own))", "SEX, AGE, AGE_sq, MARST, NCHILD, I(RELATE == 1), EDUC, NS(educational assistance), METRO, I(CLASSWKR == 1), i.STATE, log(NS(household income other than your own))", "SEX, I(MARST < 3), I(RELATE == 1), METRO, EDUC, SCHOOL, NS(lnextrainc), STATE", "SEX, AGE, I(RACE == 1), I(MARST == 1), I(SPEAKENG not in (0, 1, 7, 8, 9)), I(EDUC > 6), NCHILD, i.STATE, i.YEAR, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES, UNEMP, LFPR", "SEX, AGE, I(RACE == 1), I(MARST == 1), I(SPEAKENG not in (0, 1, 7, 8, 9)), NCHILD, i.STATE, i.YEAR, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES", "TENURE, NS(household_percapita_income), RELATE, SEX, AGE, MARST, RACE, EDUC, UNEMP", "TENURE, NS(household percapita income), RELATE, SEX, AGE, MARST, RACE, EDUC, UNEMP", "VETSTAT, SEX, I(MARST in (1, 2)), MAX(EDUC - 5, 0), I(SPEAKENG == 6) + 2*I(SPEAKENG == 5) + 3*I(SPEAKENG == 4) + 4*I(SPEAKENG == 3)", "SEX, rachsing, MARST, EDUC, i.STATE:i.YEAR, AGE, AGE_AT_MIGRATION", "SEX, RACE, MARST, I(EDUC == 6), I(EDUC in (7, 8)), I(EDUC >= 9), AGE, YRSUSA1, STATE, YEAR", 'SEX, STATE, YEAR, EDUC, RACE, VETSTAT, YRIMMIG, AGE, SPEAKENG, METRO, I(diffeye=="Yes"| diffhear=="Yes"| diffcare=="Yes" | diffrem=="Has cognitive difficulty"| diffphys=="Has ambulatory difficulty" |diffmob=="Has independent living difficulty"|diffsens=="Has vision or hearing difficulty")',
                                 "YRIMMIG, i.SEX, i.RACE, I(Citizen == 2):i.AGE , AGE_AT_MIGRATION(YRIMMIG, BIRTHYR), I(Citizen == 2):i.AGE_AT_MIGRATION, i.STATE:i.YEAR, i.YEAR:i.AGE"),
                    new = c("UNEMP, AGE_AT_MIGRATION, I(EDUC == 6), I(EDUC IN (7 OR 8)), I(EDUC >= 9), SEX, I(RACE == 1), I(MARST < 3), YEAR:STATE", "METRO, FARM, RELATE, SEX, AGE, MARST, EDUC, FERTYR, YRSUSA1, I(SPEAKENG IN SOMETHING | LINGISOL == 2), I(VETDISAB + DIFFREM + DIFFPHYS + DIFFMOB + DIFFCARE + DIFFSENS > 1), I(SPMPOV == 1 || OFFPOV == 1)", "SEX, AGE, EDUC, RELATE, MARST, FERTYR, METRO, FARM, YRSUSA1, I(SPEAKENG IN (1 OR 6)), I(DIFFREM > 1), I(DIFFPHYS > 1), I(DIFFMOB > 1), I(DIFFCARE > 1), I(DIFFSENS > 1), UNEMP", "SEX, AGE, I(RACE == 1), I(MARST IN (1 OR 2)), I(SPEAKENG != 1), NCHILD, EDUC_RECODE, i.STATE:i.YEAR, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES", "EDUC, SEX, I(RELATE IN (1 OR 2)), I(MARST < 3), I(RACE != 1), UNEMP", "SEX, RACE, MARST, I(EDUC == 6), I(EDUC IN (7 OR 8), I(EDUC >= 9), AGE, YRSUSA1, STATE, YEAR", "i.STATE:i.YEAR, i.YRIMMIG, i.AGE_AT_MIGRATION, YRSUSA1, I(EDUCD IN (62 OR 63 OR 65)), I(EDUCD == 64), I(VETSTATD IN (20 OR 21 OR 22)), I(EDUC IN (7 OR 8 OR 10 OR 11)), i.RACE, i.SEX, i.BIRTHYR:YEAR","SEX, VETSTAT, I(MARST < 3), MAX(EDUC-5 OR 0), I(SPEAKENG == 6) + 2*I(SPEAKENG == 5) + 3*I(SPEAKENG == 4) + 4*I(SPEAKENG == 3)","VETSTAT, SEX, I(MARST in (1 OR 2)), MAX(EDUC - 5 OR 0), I(SPEAKENG == 6) + 2*I(SPEAKENG == 5) + 3*I(SPEAKENG == 4) + 4*I(SPEAKENG == 3)",
                            "i.YEAR, i.STATE, I(METRO in (2 OR 3 OR 4)), SEX, I(RACE == 1), AGE, AGE_sq, YRSUSA1, yrsusa1_sq, I(MARST == 1), I(EDUCD BETWEEN 101 AND 116)", "EDUCD, I(EDUCD ==64), I(EDUCD >=65 AND <=100), I(EDUCD >= 101), I(SEX == 1), I(MARST <= 2), UNEMP, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, HIGHEREDBAN, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES, I(RACE == 'chinese' | RACE== 'japanese' | RACE== 'other asian or pacific islander'), I(RACE == 'black/african american'), I(RACE == 'american indian or alaska native'), I(RACE == 'other race OR nec' | RACE=='two major races' | RACE=='three or more major races'), i.YEAR, i.AGE, i.AGE_AT_MIGRATION, i.STATE", "EDUCD, I(EDUCD ==64), I(EDUCD >=65 AND <=100), I(EDUCD >= 101), I(SEX == 1), I(MARST <= 2), UNEMP, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, HIGHEREDBAN, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES, I(RACE == 'chinese' | RACE== 'japanese' | RACE== 'other asian or pacific islander'), I(RACE == 'black/african american'), I(RACE == 'american indian or alaska native'), I(RACE == 'other race OR nec' | RACE=='two major races' | RACE=='three or more major races'), i.YEAR, i.AGE, i.AGE_AT_MIGRATION, i.STATE", "EDUCD, I(EDUCD ==64), I(EDUCD >=65 AND <=100), I(EDUCD >= 101), I(SEX == 1), I(MARST <= 2), UNEMP, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, HIGHEREDBAN, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES, I(RACE == 'chinese' | RACE== 'japanese' | RACE== 'other asian or pacific islander'), I(RACE == 'black/african american'), I(RACE == 'american indian or alaska native'), I(RACE == 'other race OR nec' | RACE=='two major races' | RACE=='three or more major races'), i.YEAR, i.AGE, i.AGE_AT_MIGRATION, i.STATE", "Age, sex, I(MARST <= 2), educ_recode, famsize, year of immigration", "age,sex,marst,nchild,relate,metro,educ,school, log(NS(HH income other than your own))", "SEX, AGE, AGE_sq, MARST, NCHILD, I(RELATE == 1), EDUC, NS(educational assistance), METRO, I(CLASSWKR == 1), i.STATE, log(NS(household income other than your own))", "SEX, I(MARST < 3), I(RELATE == 1), METRO, EDUC, SCHOOL, NS(lnextrainc), STATE", "SEX, AGE, I(RACE == 1), I(MARST == 1), I(SPEAKENG not in (0 OR 1 OR 7 OR 8 OR 9)), I(EDUC > 6), NCHILD, i.STATE, i.YEAR, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES, UNEMP, LFPR", "SEX, AGE, I(RACE == 1), I(MARST == 1), I(SPEAKENG not in (0 OR 1 OR 7 OR 8 OR 9)), NCHILD, i.STATE, i.YEAR, DRIVERSLICENSES, INSTATETUITION, STATEFINANCIALAID, EVERIFY, LIMITEVERIFY, OMNIBUS, TASK287G, JAIL287G, SECURECOMMUNITIES", "TENURE, NS(household_percapita_income), RELATE, SEX, AGE, MARST, RACE, EDUC, UNEMP", "TENURE, NS(household percapita income), RELATE, SEX, AGE, MARST, RACE, EDUC, UNEMP", "VETSTAT, SEX, I(MARST in (1 OR 2)), MAX(EDUC - 5 OR 0), I(SPEAKENG == 6) + 2*I(SPEAKENG == 5) + 3*I(SPEAKENG == 4) + 4*I(SPEAKENG == 3)", "SEX, rachsing, MARST, EDUC, i.STATE:i.YEAR, AGE, AGE_AT_MIGRATION", "SEX, RACE, MARST, I(EDUC == 6), I(EDUC in (7 OR 8)), I(EDUC >= 9), AGE, YRSUSA1, STATE, YEAR", 'SEX, STATE, YEAR, EDUC, RACE, VETSTAT, YRIMMIG, AGE, SPEAKENG, METRO, I(diffeye=="Yes"| diffhear=="Yes"| diffcare=="Yes" | diffrem=="Has cognitive difficulty"| diffphys=="Has ambulatory difficulty" |diffmob=="Has independent living difficulty"|diffsens=="Has vision or hearing difficulty")',
                            "YRIMMIG, i.SEX, i.RACE, I(Citizen == 2):i.AGE , i.AGE_AT_MIGRATION, I(Citizen == 2):i.AGE_AT_MIGRATION, i.STATE:i.YEAR, i.YEAR:i.AGE"))